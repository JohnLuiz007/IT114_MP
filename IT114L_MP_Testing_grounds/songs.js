var songList = [{
    name: "Adam's Song",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/adamsong.mp3",
    year:1999
}, {
    name: "All the Small things",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/allthesmallthings.mp3",
    year:1999
}, {
    name: "First Date",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/firstdate.mp3",
    year:2001
}, {
    name: "Anthem Part Two",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/AnthemPartTwo.mp3",
    year:2001
}, {
    name: "The Rock Show",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/TheRockShow.mp3",
    year:2001
}, {
    name: "Dammit",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/dammit.mp3",
    year:1997
}, {
    name: "Josie",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/josie.mp3",
    year:1997
}, {
    name: "Dumpweed",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/dumpweed.mp3",
    year:1999
}, {
    name: "Aliens Exist",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Aliens Exist.mp3",
    year:1999
}, {
    name: "Going Away to College",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Going Away To College.mp3",
    year:1999
}, {
    name: "Whats My Age Again",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Whats My Age Again.mp3",
    year:1999
}, {
    name: "Dysentery Gary",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Dysentery Gary.mp3",
    year:1999
}, {
    name: "Mutt",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Mutt.mp3",
    year:1999
}, {
    name: "Dont Leave Me",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Dont Leave Me.mp3",
    year:1999
}, {
    name: "The Party Song",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/The Party Song.mp3",
    year:1999
}, {
    name: "Wendy Clear",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Wendy Clear.mp3",
    year:1999
}, {
    name: "Anthem",
    album: "Enema of the State",
    albumCover: "EnemaoftheState.jpg",
    url: "songs/Anthem.mp3",
    year:1999
}, {
    name: "Story Of A Lonely Guy",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/StoryLonely.mp3",
    year:2001
}, {
    name: "Online Songs",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Online Songs.mp3",
    year:2001
}, {
    name: "Happy Holidays, You Bastard",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Happy Holidays.mp3",
    year:2001
}, {
    name: "Roller Coaster",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Roller Coaster.mp3",
    year:2001
}, {
    name: "Reckless Abandon",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Reckless Abandon.mp3",
    year:2001
}, {
    name: "Stay Together For The Kids",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Stay Together For The Kids.mp3",
    year:2001
}, {
    name: "Every Time I Look For You",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Every Time I Look For You.mp3",
    year:2001
}, {
    name: "Give Me One Good Reason",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Give Me One Good Reason.mp3",
    year:2001
}, {
    name: "Please Take Me Home",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Please Take Me Home.mp3",
    year:2001
}, {
    name: "Shut Up",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/Shut Up.mp3",
    year:2001
}, {
    name: "Feeling This",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Feeling This.mp3"
}, {
    name: "I Miss You",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/I Miss You.mp3"
}, {
    name: "Pathetic",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Pathetic.mp3",
    year:1997
}, {
    name: "Adam's Song - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/marktom.mp3"
}, {
    name: "Blowjob - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Blowjobsong.mp3"
}, {
    name: "Family Reunion - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Family Reunion.mp3"
}, {
    name: "Dont Leave Me - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Dont Leave Me - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Dumpweed - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Dumpweed - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Aliens Exist - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Aliens Exist - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Going Away To College - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Going Away To College - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Whats My Age Again - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Whats My Age Again - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Rich Lips - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Rich Lips - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Untitled - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Untitled - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Vouyeur - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Voyeur - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Dammit - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Dammit - The Mark, Tom and Travis Show.mp3"
}, {
    name: "The Country Song - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/The Country Song - The Mark, Tom and Travis Show.mp3"
}, {
    name: "All The Small Things - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/All The Amall Things - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Wendy Clear - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Wendy Clear - The Mark, Tom and Travis Show.mp3"
}, {
    name: "Peggy Sue - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Peggy Sue- The Mark, Tom and Travis Show.mp3"
}, {
    name: "Mutt - The Mark, Tom and Travis Show",
    album: "marktom",
    albumCover: "marktom.jpg",
    url: "songs/Mutt - The Mark, Tom and Travis Show.mp3"
}, {
    name: "I'm Sorry",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Im Sorry.mp3",
    year:1997
}, {
    name: "Lemmings",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Lemmings.mp3",
    year:1997
}, {
    name: "Degenerate",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Degenerate.mp3",
    year:1997
}, {
    name: "A New Hope",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/A New Hope.mp3",
    year:1997
}, {
    name: "Emo",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Emo.mp3",
    year:1997
}, {
    name: "Dick Lips",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Dick Lips.mp3",
    year:1997
}, {
    name: "Enthused",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Enthused.mp3",
    year:1997
}, {
    name: "Apple Shampoo",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Apple Shampoo.mp3",
    year:1997
}, {
    name: "Untitled",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Untitled.mp3",
    year:1997
}, {
    name: "Waggy",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Waggy.mp3",
    year:1997
}, {
    name: "Boring",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Boring.mp3",
    year:1997
}, {
    name: "Voyeur",
    album: "dude ranch",
    albumCover: "duderanch.jpg",
    url: "songs/Voyeur.mp3",
    year:1997
}, {
    name: "Obvious",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Obvious.mp3",
    year:2003
}, {
    name: "Violence",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Violence.mp3",
    year:2003
}, {
    name: "Stockholm Syndrome Interlude",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Stockholm Syndrome Interlude.mp3",
    year:2003
}, {
    name: "Stockholm Syndrome",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Stockholm Syndrome.mp3",
    year:2003
}, {
    name: "Down",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Down.mp3",
    year:2003
}, {
    name: "The Fallen Interlude",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/The Fallen Interlude.mp3",
    year:2003
}, {
    name: "Go",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Go.mp3",
    year:2003
}, {
    name: "Asthenia",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Asthenia.mp3",
    year:2003
}, {
    name: "Always",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Always.mp3",
    year:2003
}, {
    name: "Easy Target",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Easy Target.mp3",
    year:2003
}, {
    name: "All of This",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/All of This.mp3",
    year:2003
}, {
    name: "Here's Your Letter",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Heres Your Letter.mp3",
    year:2003
}, {
    name: "I'm Lost Without You",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Im Lost Without You.mp3",
    year:2003
}, {
    name: "Anthem Part Two(Live in Chicago)",
    album: "blink182",
    albumCover: "blink182.jpg",
    url: "songs/Anthem Part Two (Live In Chicago).mp3",
    year:2003
}, {
    name: "I wanna fuck a dog in the ass",
    album: "take off your pants",
    albumCover: "takeoffyourpants.jpg",
    url: "songs/I wanna fuck a dog in the ass.mp3",
    year:2001
}]


, audio = document.getElementById("audio");



    
document.addEventListener("DOMContentLoaded", function() {
// Sort the songList array alphabetically by song name
songList.sort((a, b) => a.name.localeCompare(b.name));

var m = document.getElementById("songList"),
    e = document.getElementById("songSearch"),
    a = 0,
    o = [],
    l = [],
    r = -1,
    t = [],
    u = 5;
    function n() {
        document.getElementById("queueItems").innerHTML = ""
    }
    function s() {
        var e = o.filter(function(e) {
            return !t.includes(e) && !l.includes(e)
        });
        0 < e.length ? (e.sort(function(e, n) {
            return o.indexOf(e) - o.indexOf(n)
        }),
        e = (o.indexOf(t[t.length - 1]) + 1) % o.length,
        E(e = o[e]),
        w(e)) : (E(e = o[0]),
        w(e))
    }
    function i(e) {
        e.sort((e,n)=>e.name.localeCompare(n.name)),
        m.innerHTML = "";
        var n = 10 * a;
        e.slice(n, 10 + n).forEach(function(t) {
            var e, n, a = document.createElement("div"), o = (a.classList.add("song-container"),
            document.createElement("div")), r = (o.classList.add("album-cover"),
            o.setAttribute("data-src", t.albumCover),
            document.createElement("div"));
            r.classList.add("song-title"),
            r.textContent = (e = t.name,
            n = 25,
            e.length > n ? e.substring(0, n) + "..." : e),
            a.appendChild(o),
            a.appendChild(r),
            m.appendChild(a),
            a.onclick = function() {
                E(t)
            }
            ,
            a.addEventListener("contextmenu", function(e) {
                var n, a, o;
                e.preventDefault(),
                n = e.pageX,
                e = e.pageY,
                a = t,
                (o = document.getElementById("contextMenu")).style.top = e + "px",
                o.style.left = n + "px",
                o.style.display = "block",
                document.getElementById("addToQueue").onclick = function() {
                    l.push(a),
                    S(l),
                    o.style.display = "none"
                }
                ,
                window.addEventListener("click", function(e) {
                    o.contains(e.target) || (o.style.display = "none")
                })
            })
        }),
        v()
    }
    audio.addEventListener("ended", function() {
        document.getElementById("nextsongButton").click();
    });
    
    
    e.addEventListener("input", function() {
        d()
    });
    const d = function(n, a) {
        let o;
        return function(...e) {
            clearTimeout(o),
            o = setTimeout(()=>{
                o = null,
                n(...e)
            }
            , a)
        }
    }(function() {
        var n;
        n = e.value.trim(),
        o = n ? songList.filter(function(e) {
            return e.name.toLowerCase().includes(n.toLowerCase())
        }) : songList.slice(),
        a = 0,
        i(o)
    }, 200);
    window.addEventListener("scroll", function() {
        v()
    });
    for (var g = document.querySelectorAll(".album-button"), c = (g.forEach(function(e) {
        e.addEventListener("click", function() {
            var n = e.dataset.album;
            g.forEach(function(e) {
                e.classList.remove("active")
            }),
            e.classList.add("active"),
            n ? (o = songList.filter(function(e) {
                return e.album === n
            }),
            a = 0,
            i(o)) : (o = [],
            a = 0,
            i(songList))
        })
    }),
    songList), p = c.length - 1; 0 < p; p--) {
        var h = Math.floor(Math.random() * (p + 1));
        [c[p],c[h]] = [c[h], c[p]]
    }
    function v() {
        document.querySelectorAll("div.album-cover[data-src]").forEach(function(e) {
            e.getBoundingClientRect().top < window.innerHeight && (e.style.backgroundImage = "url('" + e.getAttribute("data-src") + "')",
            e.removeAttribute("data-src"))
        })
    }
    i(songList),
    document.getElementById("nextButton").addEventListener("click", function() {
        var e = (0 < o.length ? o : songList).length
        , e = Math.ceil(e / 10);
        a < e - 1 && (a++,
        i(0 < o.length ? o : songList))
    });
    document.getElementById("prevButton").addEventListener("click", function() {
        0 < a && (a--,
        i(0 < o.length ? o : songList))
    });
    var b = document.getElementById("playPauseButton")
    , f = document.getElementById("progressBar")
    , k = document.getElementById("currentTime")
    , y = document.getElementById("duration")
    , T = document.getElementById("currentSong")
    , C = document.getElementById("volumeBar");
    function E(n) {
        var a, e;
        audio.src !== n.url ? (audio.src = n.url,
        audio.play(),
        b.innerHTML = "&#10074;&#10074;",
        e = n,
        T.textContent = e.name,
        albumCover.src = e.albumCover,
        e = e.name,
        console.log("Fetching lyrics for:", e),
        a = document.getElementById("Lyrics"),
        fetch("https://api.lyrics.ovh/v1/blink182/" + e).then(e=>e.json()).then(e=>{
            e.lyrics ? a.innerText = e.lyrics : a.innerText = "Lyrics not found for this song."
        }
        ).catch(e=>{
            console.error("Error fetching lyrics:", e),
            a.innerText = "Error fetching lyrics. Please try again later."
        }
        ),
        audio.addEventListener("timeupdate", function() {
            var e, n, a = Math.floor(audio.currentTime), o = Math.floor(audio.duration);
            isNaN(o) || 0 === o || (f.value = a / o * 100,
            e = Math.floor(a / 60),
            a = Math.floor(a - 60 * e),
            n = Math.floor(o / 60),
            o = Math.floor(o - 60 * n),
            k.textContent = e + ":" + (a < 10 ? "0" + a : a),
            y.textContent = n + ":" + (o < 10 ? "0" + o : o))
        }),
        e = t.findIndex(function(e) {
            return e.url === n.url
        }),
        r = -1 === e ? (t.length >= u && t.shift(),
        t.push(n),
        t.length - 1) : e) : audio.paused ? (audio.play(),
        b.innerHTML = "&#10074;&#10074;") : (audio.pause(),
        b.innerHTML = "&#9658;")
    }
    function L(e) {
        var n = document.getElementById("volumeIcon");
        0 === e ? (n.classList.remove("fa-volume-up", "fa-volume-down"),
        n.classList.add("fa-volume-off")) : e < .5 ? (n.classList.remove("fa-volume-up", "fa-volume-off"),
        n.classList.add("fa-volume-down")) : (n.classList.remove("fa-volume-down", "fa-volume-off"),
        n.classList.add("fa-volume-up"))
    }
    function S(e) {
        var t = document.getElementById("queueItems");
        t.innerHTML = "",
        0 === e.length ? t.innerHTML = "" : e.forEach(function(e, n) {
            var a = document.createElement("li")
            , o = (a.classList.add("queue-item", "d-flex", "justify-content-between", "align-items-center"),
            document.createElement("span"))
            , e = (o.classList.add("song-info"),
            o.textContent = e.name,
            document.createElement("button"));
            e.classList.add("btn", "btn-outline-light", "remove-btn"),
            e.innerHTML = "&times;",
            e.setAttribute("type", "button"),
            e.onclick = function(e) {
                e.stopPropagation(),
                l.splice(n, 1),
                S(l)
            }
            ,
            a.appendChild(o),
            a.appendChild(e),
            t.appendChild(a),
            a.onclick = function() {
                var e;
                r === (e = n) ? audio.paused ? (audio.play(),
                b.innerHTML = "&#10074;&#10074;") : (audio.pause(),
                b.innerHTML = "&#9658;") : E(l[r = e])
            }
        })
    }
    function w(n) {
        var e;
        r = l.includes(n) ? l.indexOf(n) : -1 === (e = t.findIndex(function(e) {
            return e.url === n.url
        })) ? (t.length >= u && t.shift(),
        t.push(n),
        t.length - 1) : e
    }
    document.getElementById("previoussongButton").addEventListener("click", function() {
        var e;
        0 < t.length ? (--r < 0 && (r = t.length - 1),
        E(t[r])) : 0 < l.length && -1 !== r ? (--r < 0 && (r = l.length - 1),
        E(l[r])) : (e = songList.length - 1,
        E(songList[e]),
        r = e)
    }),
    document.getElementById("nextsongButton").addEventListener("click", function() {
        var nextSongIndex;
        
        if (l.length > 0) {
            // If there are queued songs, play the next song in the queue
            var nextSong = l.shift();
            nextSongIndex = songList.findIndex(song => song === nextSong);
            
            // Update the queue list, removing the currently played song
            S(l);
        } else {
            // If there are no queued songs, find the index of the last played song
            var lastIndex = songList.findIndex(song => song === t[t.length - 1]);
            
            // If the last played song is not found or it's the last song in the list, play the first song
            if (lastIndex === -1 || lastIndex === songList.length - 1) {
                nextSongIndex = 0;
            } else {
                // Otherwise, play the next song in alphabetical order
                nextSongIndex = lastIndex + 1;
            }
        }
        
        // Play the selected song
        var nextSong = songList[nextSongIndex];
        E(nextSong);
        w(nextSong);
    });
    
    b.addEventListener("click", function() {
        audio.paused ? (audio.play(),
        b.innerHTML = "&#10074;&#10074;") : (audio.pause(),
        b.innerHTML = "&#9658;")
    }),
    f.addEventListener("input", function() {
        var e = f.value
        , n = audio.duration;
        audio.currentTime = e * n / 100
    }),
    C.addEventListener("input", function() {
        audio.volume = C.value,
        L(C.value)
    }),
    L(C.value),
    S(l)
});
var audioControlButton = document.getElementById("audioControlButton");
function loadMoreSongs() {
    setTimeout(function() {
        songList.slice(10, 20).forEach(function(e) {})
    }, 1e3)
}
function lazyLoadImages() {
    var e = document.querySelectorAll("img[data-src]")
    , n = new IntersectionObserver(function(e, n) {
        e.forEach(function(e) {
            e.isIntersecting && ((e = e.target).src = e.dataset.src,
            e.removeAttribute("data-src"),
            n.unobserve(e))
        })
    }
    ,{
        root: null,
        rootMargin: "0px",
        threshold: .1
    });
    e.forEach(function(e) {
        n.observe(e)
    })
}

document.getElementById("volumeIcon").addEventListener("click", function(e) {
    e.stopPropagation(),
    document.getElementById("volumeBarContainer").classList.toggle("active")
}),
document.body.addEventListener("click", function(e) {
    var n = document.getElementById("volumeBarContainer");
    e.target.closest(".volume-control") || n.classList.remove("active")
}),
document.addEventListener("keydown", function(e) {
    "ArrowLeft" === e.key ? document.getElementById("prevButton").click() : "ArrowRight" === e.key && document.getElementById("nextButton").click()
}),
window.addEventListener("scroll", function() {
    lazyLoadImages()
}),
window.addEventListener("DOMContentLoaded", function() {
    songList.slice(0, 10).forEach(function(e) {}),
    lazyLoadImages(),
    window.addEventListener("scroll", function() {
        window.innerHeight + window.scrollY >= document.body.offsetHeight && loadMoreSongs()
    })
}),
document.addEventListener("keydown", function(e) {
    "Space" === e.code && document.activeElement !== songSearch && (e.preventDefault(),
    audio.paused ? (audio.play(),
    playPauseButton.innerHTML = "&#10074;&#10074;") : (audio.pause(),
    playPauseButton.innerHTML = "&#9658;"))
});
var audio = document.getElementById("audio");
var shuffleEnabled = false; // Variable to track shuffle state

// Function to toggle shuffle state
function toggleShuffle() {
    // Toggle shuffle state
    shuffleEnabled = !shuffleEnabled;
    
    // Get the shuffle button element
    var shuffleButton = document.getElementById("shuffleButton");
    
    // Update button style to reflect shuffle state
    shuffleButton.classList.toggle("active", shuffleEnabled);
    
    // If shuffle is enabled, shuffle the songList array
    if (shuffleEnabled) {
        for (var i = songList.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            [songList[i], songList[j]] = [songList[j], songList[i]];
        }
    } else {
        // If shuffle is disabled, sort the songList array alphabetically by song name
        songList.sort((a, b) => a.name.localeCompare(b.name));
    }
}


// Click event handler for the shuffle button
document.getElementById("shuffleButton").addEventListener("click", function() {
    toggleShuffle();
    // If shuffle is enabled and a song is currently playing, shuffle the songs
    if (shuffleEnabled && audio.paused === false) {
        var currentIndex = songList.findIndex(song => song.url === audio.src);
        var shuffledIndex = Math.floor(Math.random() * songList.length);
        while (shuffledIndex === currentIndex) {
            shuffledIndex = Math.floor(Math.random() * songList.length);
        }
        E(songList[shuffledIndex]);
        
    }
});

    